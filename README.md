# Сервис разбиения стерео аудио файлов

## Описание:

Сервиса реализует разбиение стерео аудио-файла на 2 файла по каналам.
Создаваемые файлы сохраненяются в s3 хранилище. Ссылки на полученные файлы пользователь может получить через REST API, а также реализована фоновая обработка задач по разбиению файлах через очереди RabbitMQ.
История обращений к REST API сохраняется в базу данных.

## Как запустить проект локально:

### Клонировать репозиторий и перейти в него:

```sh
git clone https://github.com/Rezenhorn/split_audio_app.git
```

```sh
cd split_audio_app/
```

### В файле конфигурации приложения `slit_audio_app/config.yaml` указать данные вашего s3 хранилища (endpoint, bucket, aws_server_public_key, aws_server_secret_key).

#### Убедиться, что в системе установлен и запущен Docker.

### Запустить приложение через docker-compose:


```sh
docker-compose up -d --build
```

### Проект станет доступен по адресу <http://localhost:5050/>. Доступ к веб-интерфейсу RabbitMQ: <http://localhost:15672/>

## Спецификация REST API

### Разбиение аудиофайла по ссылке

**Метод и URL запроса**

`POST → http://localhost:5050/api/v1/split_audio`

**Параметры запроса**

В теле запроса в формате JSON должна передаваться ссылка на скачивание стерео аудиофайла, который необходимо разбить.

В запросе необходимо использовать заголовок Content-Type: application/json

**Пример запроса**

```json
{
  "link": "<ссылка на файл>",
}
```

**Ответ на запрос**

```json
{
  "status": "success",
  "result": {
    "left_mono": "<ссылка на скачивание левого канала>",
    "right_mono": "<ссылка на скачивание правого канала>"
  }
}
```